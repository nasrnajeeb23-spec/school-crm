# دليل مدير المدرسة (School Admin) — موسّع شاشة-بشاشة

## نظرة عامة
هذا الدليل يقدّم خطوات دقيقة، مرتبة وصحيحة، لاستخدام كل شاشة وزر وحقل ضمن صلاحيات مدير المدرسة، للوصول إلى أداء 100% بدون أخطاء.

## 1) لوحة التحكم (Dashboard)
- المؤشرات: عدد الطلاب، عدد المعلمين، نسبة الحضور، متوسط الدرجات، الصحة المالية.
- عناصر:
  - فلاتر زمنية (أسبوع/شهر/ربع/سنة).
  - روابط سريعة: الطلاب، المعلمين، الفصول، المالية، الحضور.
- إجراءات صحيحة:
  1. اختر الفترة الزمنية المناسبة.
  2. راجع المؤشرات، وحدد الأولويات (الفواتير المتأخرة، الصفوف منخفضة الأداء).

## 2) إعدادات المدرسة (School Settings)
- الحقول الأساسية:
  - الاسم/العنوان/الشعار/الهاتف/البريد.
  - أيام العمل (قائمة): الأحد–الخميس.
  - ساعات العمل (بداية/نهاية).
  - العام الدراسي (تاريخ بداية/نهاية).
  - طرق الحضور (يدوي/أتمتة لاحقة).
  - المراحل الدراسية (رياض/ابتدائي/إعدادي/ثانوي).
  - وحدات فعّالة (رسوم/نقل/رسائل/تحليلات).
- خطوات صحيحة:
  1. افتح إعدادات المدرسة.
  2. أدخل بيانات الاتصال بدقة.
  3. اضبط أيام وساعات العمل.
  4. حدّد المراحل المتاحة.
  5. راجع الوحدات المفعلة وفق الترخيص.
  6. احفظ التغييرات.

## 3) المعلمون (Teachers)
- شاشة القائمة:
  - أعمدة: الاسم، البريد، الحالة، تاريخ الانضمام.
  - فلاتر: الاسم، الحالة.
  - أزرار: إضافة، تعديل، تعطيل/تفعيل.
- إضافة معلم (نموذج):
  - حقول: الاسم، البريد، الحالة (نشط/موقوف).
  - إجراءات صحيحة:
    1. اضغط "إضافة".
    2. أدخل الاسم والبريد.
    3. اختر الحالة.
    4. احفظ.
- ربط معلم غرفة لفصل:
  - افتح شاشة الفصول ← تعديل فصل ← اختر معلم غرفة.

## 4) الفصول (Classes)
- شاشة القائمة:
  - أعمدة: المرحلة/القسم، السعة، معلم غرفة.
  - أزرار: إضافة، تعديل، حذف (محمي بشرط عدم وجود اعتماديات).
- إضافة فصل (نموذج):
  - حقول: المرحلة، القسم، السعة، معلم غرفة (اختياري)، مواد.
  - إجراءات:
    1. اضغط "إضافة".
    2. أدخل المرحلة والقسم والسعة.
    3. عيّن معلم غرفة إن وُجد.
    4. احفظ.
- شاشة roster/المواد/معلمي المواد:
  - أضف/عدّل المواد ومعلميها لكل فصل.

## 5) الطلاب (Students)
- شاشة القائمة:
  - أعمدة: الاسم، الصف/الفصل، ولي الأمر، الحالة.
  - فلاتر: الاسم، الصف، الحالة.
  - أزرار: إضافة، تعديل، حذف، استيراد (CSV)، تصدير.
- إضافة طالب (نموذج):
  - حقول: الاسم، الصف، ولي الأمر، تاريخ الميلاد، الفصل، العنوان.
  - الإجراءات الصحيحة:
    1. اضغط "إضافة".
    2. أدخل بيانات الطالب بدقة.
    3. اربط ولي الأمر أو أنشئه لاحقًا عبر الدعوة.
    4. احفظ.
- استيراد الطلاب:
  - ارفع ملف CSV متوافق، راجع النتائج، أصلح الأخطاء.

## 6) المالية والرسوم (Finance)
- إعداد الرسوم (Fee Setup):
  - حقول: المرحلة، رسوم الدراسة، الكتب، الزي، الأنشطة، خطة الدفع، التخفيضات.
  - الإجراءات:
    1. افتح "الرسوم".
    2. اضغط "إضافة مرحلة".
    3. أدخل القيم بدقة.
    4. احفظ.
- توليد الفواتير:
  - اختر مجموعة الطلاب (حسب مرحلة/فصل).
  - راجع المبالغ ثم نفّذ التوليد.
- تسجيل المدفوعات:
  - افتح فاتورة الطالب، أدخل مبلغ الدفع وطريقة الدفع ورقم العملية.

## 7) الحضور والغياب (Attendance)
- حضور الفصل:
  - افتح فصل محدد → تبويب الحضور → حدّد حالة كل طالب.
- حضور المعلمين والموظفين:
  - من صفحة الحضور الخاصة أدخل التاريخ والحالة، وساعات/تأخر/وقت إضافي.
- تقارير الحضور:
  - استخدم التحليلات لمراجعة النسب والأيام ذات انخفاض الحضور.

## 8) الرسائل والإشعارات (Messaging)
- إنشاء محادثة:
  - اختر طرفًا (معلم/ولي أمر)، حدّد عنوان المحادثة.
  - التحقق: `schoolId` يجب أن يطابق مدرسة المدير.
- إرسال رسالة:
  - أدخل النص/المرفق، أرسل.
- التحميل/المرفقات:
  - ارفع ملفات آمنة، يتطلب مساحة تخزين مناسبة.

## 9) النقل المدرسي (Transportation)
- المشغلون/المسارات:
  - أضف مشغلًا، أنشئ مسارًا، عيّن سعة الحافلة.
  - اربط طلابًا بالمسار.

## 10) التقارير والتحليلات (Analytics)
- لوحات عامة:
  - نظرة عامة، أداء أكاديمي، اتجاهات مالية، أداء المعلمين.
- الكاش:
  - الطلبات المتكررة تصبح أسرع ضمن TTL.

## 11) النسخ الاحتياطي (Backup)
- ضبط الجدولة اليومية/الشهرية.
- تنزيل ملفات النسخ (zip) عند الحاجة.

## 12) إجراءات بلا أخطاء — قائمة تدقيق
1. إعداد المدرسة أولًا (أيام/ساعات/مراحل).
2. إضافة المعلمين ثم إنشاء الفصول.
3. إضافة الطلاب وربطهم بالفصول.
4. إعداد الرسوم قبل توليد الفواتير.
5. تفعيل وحدات الرسائل/النقل إن لزم.
6. راجع التحليلات لتحديد نقاط التحسين.

## 13) حلول المشاكل الشائعة
- الفواتير لا تظهر: أضف إعداد رسوم للمرحلة.
- رفض الوصول: تحقق من تطابق `schoolId` والدور.
- بطء التحليلات: فعّل الكاش Redis واضبط TTL.


