## 1) تصميم البنية التقنية لمركز المساعدة

### نظرة عامة
- يعتمد مركز المساعدة على ملفات Markdown قابلة للتحرير لتقديم الأدلة والمحتوى.
- الواجهة الأمامية (React) تعرض المحتوى مع بحث داخلي وتصدير إلى PDF ودعم RTL للعربية.
- الواجهة الخلفية (Node/Express) توفّر واجهات قراءة/قائمة للمستندات وتوليد PDF عند الطلب.
- التخزين: الملفات ضمن `frontend/docs/` و`backend/docs/` لتغطية الأدلة العامة والفنية.

### المكوّنات الرئيسية
- واجهة `/help-center`: صفحة مركزية تتضمن قائمة الأقسام، نتائج البحث، ومعاينة المستند.
- محرّك بحث داخلي (Fuse.js) على واجهة React لفهرسة Markdown وعرض النتائج الفورية.
- طبقة تصدير PDF: تستدعي خدمة خلفية تقوم بتحويل Markdown إلى HTML ثم PDF (Puppeteer).
- دعم الفيديوهات: قسم خاص لروابط الفيديو ويعرض مشغّلًا مضمنًا (YouTube/Vimeo).
- Tooltips: تلميحات إرشادية تظهر في صفحات النظام الأساسية مع إمكانية تفعيل/تعطيل.

### تدفّق البيانات
1. يقرأ العميل قائمة المستندات من `/api/help/docs`.
2. عند فتح دليل معيّن، يتم جلب محتواه من `/api/help/docs/:slug`.
3. البحث يتم محليًا في الواجهة بعد تحميل فهرس العناوين والملخّصات.
4. التصدير إلى PDF: طلب إلى `/api/help/export?slug=...` يعيد ملفًا قابلاً للتنزيل.

### نموذج الملفات والمجلدات
- `frontend/docs/`:
  - `platform-admin.md`
  - `school-admin.md`
  - `teacher.md`
  - `parent.md`
  - `staff.md`
  - `finance.md`
  - `attendance.md`
  - `timetable.md`
  - `messaging-notifications.md`
  - `reports-analytics.md`
  - `faq.md`
  - `get-started.md`
  - `video-tutorials.md`
- `backend/docs/`:
  - أدلة فنية/تشغيلية وإجراءات إدارة المحتوى.

### الأمان والصلاحيات (RBAC)
- الوصول إلى مركز المساعدة متاح للجميع داخل النظام.
- بعض الأدلة قد تتطلب دورًا محددًا لإظهار محتوى متقدم (مثلاً أدلة الإعداد الفني للمدير العام).
- يتم التحقق على مستوى الواجهة لإخفاء الأقسام غير الملائمة بحسب الدور.

### البحث والتصنيف
- الفهرسة: تُبنى قائمة بالعناوين الرئيسية وعناوين الأقسام والملخّص.
- البحث: مطابقة تقريبية للنص العربي مع مراعاة إزالة التشكيل.
- النتائج: تُعرض مع إبراز الكلمات المطابقة.

### التصدير إلى PDF
- تحويل Markdown إلى HTML ثم PDF عبر خدمة خلفية.
- معايير الطباعة: هوامش، ترقيم الصفحات، رأس/تذييل بسيط.
- يدعم العربية والـ RTL.

### دعم RTL وتعدّد اللغات
- CSS يفعّل `direction: rtl` عند اختيار اللغة العربية.
- يمكن التبديل بين العربية والإنجليزية من شريط اللغة.

### قابلية التوسّع والصيانة
- إضافة قسم جديد = إنشاء ملف Markdown ووضعه في مجلد `docs/`، مع تحديث سجل الأقسام.
- البحث يتحدّث تلقائيًا عند إعادة تحميل فهرس المستندات.
- التصدير إلى PDF لا يتطلب أي تغييرات عند إضافة ملفات جديدة.

### نشر وتشغيل
- الإنتاج: Render (Backend) وRender/Netlify/Vercel (Frontend).
- التخزين: ضمن الريبو أو مستودع ملفات ثابتة (S3) لاحقًا.
- مراقبة: سجلات الوصول والأخطاء، ومقاييس الأداء.

### نقاط تكامل لاحقة
- تعليقات سياقية داخل الأدلة.
- تتبّع قراءة الأدلة (analytics) لتحديد المحتوى الأكثر استخدامًا.
- واجهة إدارة محتوى مبسّطة لغير التقنيين.

